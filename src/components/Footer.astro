---
// Footer.astro 

interface SocialLink {
  url: string;
  ariaLabel: string;
  svgPath: string;
}

interface ContactInfo {
  text?: string;
  textAfterBreak?: string;
  email?: string;
}

interface SiteSettings {
  contactInfo?: ContactInfo;
  socialLinks?: SocialLink[];
  footerTitle?: FooterTitle;
}

interface FooterTitle {
  line1?: string;
  line2?: string;
}

const siteSettings = Astro.props.siteSettings as SiteSettings;

const {
  contactInfo = { text: "", textAfterBreak: "", email: "" },
  socialLinks = [],
  footerTitle = { line1: "", line2: "" },
} = siteSettings ?? {};
  
---

<footer id="contact" class="contact">
  <div class="wrapper">
    <div class="container">
      <h3 class="title">
        <span class="asterisk">*</span>
        {footerTitle.line1}
        {footerTitle.line2 && (
          <>
            <br />
            {footerTitle.line2}
          </>
        )}
      </h3>

      <div class="row">
        <div class="contact__links">
          <p class="paragraph contact__paragraph">
            {contactInfo.text}
            {contactInfo.textAfterBreak}
            <strong onclick={`window.location.href='mailto:${contactInfo.email}'`}>
              {contactInfo.email}
            </strong>
          </p>

          <div class="contact__social">
            {socialLinks.map((social) => (
              <a
                href={social.url}
                target="_blank"
                aria-label={social.ariaLabel}
              >
                <svg viewBox="0 0 24 24">
                  <path d={social.svgPath} />
                </svg>
              </a>
            ))}
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="logo-footer"></div>
</footer>

<script>
  import { initSplitText } from '../scripts/utils/splittext.js';
  import { waitForAssets } from '../scripts/utils/images-ready.js';

  // Wait for fonts and critical images to be ready before initializing SplitText
  waitForAssets(() => {
    // Initialize SplitText for footer title
    const title = document.querySelector('.contact h3.title') as HTMLElement;
    if (title) {
      initSplitText(title, { type: 'words' });
    }
    // Initialize SplitText for paragraph (lines)
    const paragraph = document.querySelector('.contact .paragraph') as HTMLElement;
    if (paragraph) {
      initSplitText(paragraph, { type: 'lines' });
    }
  });
</script>