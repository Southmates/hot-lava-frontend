---
// BaseLayout.astro
const { 
  title = 'Hot Lava Agency | Full-Service Advertising Agency',
  description = 'Hot Lava Agency delivers innovative, non-toxic advertising solutions. We specialize in creative strategy, digital marketing, and brand development for forward-thinking companies.',
  canonical,
  image = '/share-hot-lava-agency.jpg',
  lang = 'en',
  robots = 'index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1',
  includeVimeo = false,
  preloadImages = [] as string[],
} = Astro.props;

const siteUrl = Astro.site ?? new URL(Astro.url.origin);
const canonicalUrl = new URL(canonical ?? Astro.url.pathname, siteUrl).toString();
const ogImageUrl = new URL(image, siteUrl).toString();

const orgId = new URL('#organization', siteUrl).toString();
const websiteId = new URL('#website', siteUrl).toString();
const webpageId = `${canonicalUrl}#webpage`;

const structuredData = [
  {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    '@id': orgId,
    name: 'Hot Lava Agency',
    url: siteUrl.toString(),
    description,
    logo: new URL('/logo.svg', siteUrl).toString(),
    email: 'info@hotlavaagency.com',
    sameAs: [
      'https://www.linkedin.com/company/hot-lava/',
      'https://www.instagram.com/hotlavaagency/',
      'https://www.youtube.com/@hotlavaagency',
      'https://www.tiktok.com/@itshotlava',
    ],
    contactPoint: [
      {
        '@type': 'ContactPoint',
        contactType: 'sales',
        email: 'info@hotlavaagency.com',
      },
    ],
  },
  {
    '@context': 'https://schema.org',
    '@type': 'WebSite',
    '@id': websiteId,
    name: 'Hot Lava Agency',
    url: siteUrl.toString(),
    publisher: { '@id': orgId },
  },
  {
    '@context': 'https://schema.org',
    '@type': 'WebPage',
    '@id': webpageId,
    url: canonicalUrl,
    name: title,
    description,
    isPartOf: { '@id': websiteId },
    about: { '@id': orgId },
    primaryImageOfPage: ogImageUrl,
  },
];
---

<!DOCTYPE html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/logo.svg" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content={robots} />
    
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="Hot Lava Agency" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImageUrl} />
    <meta property="og:image:url" content={ogImageUrl} />
    <meta property="og:image:secure_url" content={ogImageUrl} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Hot Lava Agency" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@hotlavaagency" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageUrl} />
    <meta name="twitter:image:alt" content="Hot Lava Agency" />

    <!-- Mobile App Meta -->
    <!-- <meta name="apple-mobile-web-app-capable" content="yes" /> -->
    <!-- <meta name="apple-mobile-web-app-status-bar-style" content="black" /> -->
    <meta name="theme-color" content="#ffffff" />
    
    <!-- Preload critical images -->
    {preloadImages.map((href: string) => (
      <link rel="preload" as="image" href={href} />
    ))}
    
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
    
    {includeVimeo ? <script src="https://player.vimeo.com/api/player.js"></script> : null}
  </head>

  <body class="main">
    <slot />
  </body>
</html>

